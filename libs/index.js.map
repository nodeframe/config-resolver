{"version":3,"sources":["../src/index.js"],"names":["DEFAULT_ROOT","__dirname","isObject","item","Array","isArray","requireWithDefault","path","default_require","require","e","mergeConfigs","confs","reduce","acc","curr","Object","assign","resolveEnvValue","evalue","isNaN","resolveConfig","conf","keys","map","v","envs","exec","cenvs","value","process","env","toUpperCase","readCommon","dir","readProduction","readDevelopment","module","exports","NODE_ENV"],"mappings":"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","file":"index.js","sourcesContent":["\n\nconst DEFAULT_ROOT = __dirname + \"/./../../../configs\";\n\nfunction isObject (item) {\n  return (typeof item === \"object\" && !Array.isArray(item) && item !== null);\n}\n\nconst requireWithDefault = (path,default_require={})=>{\n  try{\n    return require(path);\n  }catch(e){\n    return default_require;\n  }\n}\n\nconst mergeConfigs = (...confs)=>{\n  return confs.reduce((acc,curr)=>{\n    return Object.assign(acc,curr);\n  },{});\n};\n\nconst resolveEnvValue = (evalue)=>{\n  if(evalue == \"TRUE\" || evalue == \"true\") return true;\n  else if(evalue == \"FALSE\" || evalue == \"false\") return false;\n  else if(!isNaN(+evalue))return +evalue;\n  return evalue;\n};\n\nconst resolveConfig = (conf)=>{\n  return Object.keys(conf).map((v)=>{\n    const envs = /^@(.*)/.exec(v);\n    const cenvs = /^@(.*?):([^:]*)/.exec(v);\n    const value = (isObject(conf[v]))?resolveConfig(conf[v]):conf[v];\n    if(cenvs && cenvs[1] && cenvs[2]){\n      return {[cenvs[1]]:(process.env[cenvs[2].toUpperCase()]||value)}; \n    }else if(envs && envs[1]){\n      return {[envs[1]]:(process.env[envs[1].toUpperCase()]||value)};\n    }else{\n      return {[v]:value};\n    }\n  }).reduce((acc,curr)=>{\n    return {...acc,...curr};\n  },{});\n};\n\nconst readCommon = (dir)=>{\n  return requireWithDefault(dir+\"/./common.js\",{});\n};\n\nconst readProduction = (dir)=>{\n  return requireWithDefault(dir+\"/./production.js\",{});\n};\n\nconst readDevelopment = (dir)=>{\n  return requireWithDefault(dir+\"/./development.js\",{});\n};\n\nmodule.exports = function({dir = DEFAULT_ROOT} = {}){\n  return resolveConfig(\n    mergeConfigs(\n      readCommon(dir),\n      (process.env.NODE_ENV===\"production\")?\n        readProduction(dir):readDevelopment(dir)\n    )\n  );\n};\n"]}